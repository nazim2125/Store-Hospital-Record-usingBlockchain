{"ast":null,"code":"var _jsxFileName = \"/Users/nazimkhan/Downloads/Medical Record Store in Blockchain/client/src/components/Login.js\",\n  _s = $RefreshSig$();\nimport { useEffect } from 'react';\nimport { Button, Form } from 'react-bootstrap';\nimport { useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Login = _ref => {\n  _s();\n  let {\n    mediChain,\n    connectWallet,\n    token,\n    account,\n    setToken,\n    setAccount\n  } = _ref;\n  const navigate = useNavigate();\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (account === \"\") return;\n    var res = await mediChain.methods.patientInfo(account).call();\n    if (res.exists) {\n      setToken('1');\n      localStorage.setItem('token', '1');\n      localStorage.setItem('account', account);\n      return navigate('/dashboard');\n    }\n    res = await mediChain.methods.doctorInfo(account).call();\n    if (res.exists) {\n      setToken('2');\n      localStorage.setItem('token', '2');\n      localStorage.setItem('account', account);\n      return navigate('/dashboard');\n    }\n    res = await mediChain.methods.insurerInfo(account).call();\n    if (res.exists) {\n      setToken('3');\n      localStorage.setItem('token', '3');\n      localStorage.setItem('account', account);\n      return navigate('/dashboard');\n    }\n    localStorage.removeItem('token');\n    localStorage.removeItem('account');\n    setToken('');\n    setAccount('');\n  };\n  useEffect(() => {\n    if (mediChain) {\n      var t = localStorage.getItem('token');\n      var a = localStorage.getItem('account');\n      t = t ? t : \"\";\n      a = a ? a : \"\";\n      if ((t !== \"\" || a !== \"\") && (a === account || account === '')) {\n        if (t === \"1\") {\n          mediChain.methods.patientInfo(a).call().then(res => {\n            if (res.exists) {\n              setToken(t);\n              setAccount(a);\n              return navigate('/dashboard');\n            } else {\n              localStorage.removeItem('token');\n              localStorage.removeItem('account');\n              setToken('');\n              setAccount('');\n            }\n          });\n        } else if (t === \"2\") {\n          mediChain.methods.doctorInfo(a).call().then(res => {\n            if (res.exists) {\n              setToken(t);\n              setAccount(a);\n              return navigate('/dashboard');\n            } else {\n              localStorage.removeItem('token');\n              localStorage.removeItem('account');\n              setToken('');\n              setAccount('');\n            }\n          });\n        } else if (t === \"3\") {\n          mediChain.methods.insurerInfo(a).call().then(res => {\n            if (res.exists) {\n              setToken(t);\n              setAccount(a);\n              return navigate('/dashboard');\n            } else {\n              localStorage.removeItem('token');\n              localStorage.removeItem('account');\n              setToken('');\n              setAccount('');\n            }\n          });\n        }\n      }\n    }\n  }, [mediChain]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"login\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"box\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Form, {\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n          className: \"mb-3\",\n          controlId: \"formWallet\",\n          children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n            children: \"Connect Wallet\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 25\n          }, this), account === \"\" ? /*#__PURE__*/_jsxDEV(Form.Control, {\n            type: \"button\",\n            value: \"Connect to Metamask\",\n            onClick: connectWallet\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 25\n          }, this) : /*#__PURE__*/_jsxDEV(Form.Control, {\n            type: \"button\",\n            disabled: true,\n            value: `Connected Wallet with Address: ${account}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 27\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"coolColor\",\n          type: \"submit\",\n          children: \"Submit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 90,\n    columnNumber: 9\n  }, this);\n};\n_s(Login, \"0pNeyzXk/ByIxyERsdaIrG6js9s=\", false, function () {\n  return [useNavigate];\n});\n_c = Login;\nexport default Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["useEffect","Button","Form","useNavigate","jsxDEV","_jsxDEV","Login","_ref","_s","mediChain","connectWallet","token","account","setToken","setAccount","navigate","handleSubmit","e","preventDefault","res","methods","patientInfo","call","exists","localStorage","setItem","doctorInfo","insurerInfo","removeItem","t","getItem","a","then","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","Group","controlId","Label","Control","type","value","onClick","disabled","variant","_c","$RefreshReg$"],"sources":["/Users/nazimkhan/Downloads/Medical Record Store in Blockchain/client/src/components/Login.js"],"sourcesContent":["import { useEffect } from 'react';\nimport { Button, Form } from 'react-bootstrap';\nimport { useNavigate } from 'react-router-dom';\n\nconst Login = ({mediChain, connectWallet, token, account, setToken, setAccount}) => {\n    const navigate = useNavigate();\n\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n        if(account===\"\") return;\n        var res = await mediChain.methods.patientInfo(account).call()\n        if(res.exists){\n            setToken('1');\n            localStorage.setItem('token', '1');\n            localStorage.setItem('account', account);\n            return navigate('/dashboard')\n        }\n        res = await mediChain.methods.doctorInfo(account).call()\n        if(res.exists){\n            setToken('2');\n            localStorage.setItem('token', '2');\n            localStorage.setItem('account', account);\n            return navigate('/dashboard')\n        }\n        res = await mediChain.methods.insurerInfo(account).call()\n        if(res.exists){\n            setToken('3');\n            localStorage.setItem('token', '3');\n            localStorage.setItem('account', account);\n            return navigate('/dashboard')\n        }\n        localStorage.removeItem('token')\n        localStorage.removeItem('account')\n        setToken('');\n        setAccount('');\n    }\n\n    useEffect(() => {\n        if(mediChain){   \n            var t = localStorage.getItem('token')\n            var a = localStorage.getItem('account')\n            t = t ? t : \"\"\n            a = a ? a : \"\"\n            if((t!==\"\" || a!==\"\") && (a===account || account==='')){\n                if(t===\"1\"){\n                    mediChain.methods.patientInfo(a).call().then((res) => {\n                        if(res.exists){\n                            setToken(t);\n                            setAccount(a);            \n                            return navigate('/dashboard')\n                        }else{\n                            localStorage.removeItem('token')\n                            localStorage.removeItem('account')\n                            setToken('');\n                            setAccount('');\n                        }\n                    })\n                }else if(t===\"2\"){\n                    mediChain.methods.doctorInfo(a).call().then((res) => {\n                        if(res.exists){\n                            setToken(t);\n                            setAccount(a);\n                            return navigate('/dashboard')\n                        }else{\n                            localStorage.removeItem('token')\n                            localStorage.removeItem('account')\n                            setToken('');\n                            setAccount('');\n                        }\n                    })\n                }else if(t===\"3\"){\n                    mediChain.methods.insurerInfo(a).call().then((res) => {\n                        if(res.exists){\n                            setToken(t);\n                            setAccount(a);\n                            return navigate('/dashboard')\n                        }else{\n                            localStorage.removeItem('token')\n                            localStorage.removeItem('account')\n                            setToken('');\n                            setAccount('');\n                        }\n                    })\n                }\n            }\n        }\n    }, [mediChain])\n\n    return (\n        <div className='login'>\n            <div className='box'>\n                <h2>Login</h2>\n                <br />\n                <Form onSubmit={handleSubmit}>\n                    <Form.Group className=\"mb-3\" controlId=\"formWallet\">\n                        <Form.Label>Connect Wallet</Form.Label>\n                        { account === \"\" ?\n                        <Form.Control type=\"button\" value=\"Connect to Metamask\" onClick={connectWallet}/>\n                        : <Form.Control type=\"button\" disabled value={`Connected Wallet with Address: ${account}`}/>\n                        }\n                    </Form.Group>\n                    <Button variant=\"coolColor\" type=\"submit\">\n                        Submit\n                    </Button>\n                </Form>\n            </div>\n        </div>\n    )\n}\n\n\nexport default Login"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}